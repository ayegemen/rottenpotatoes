require 'spec_helper'

describe MoviesController do
  #render_views
  describe "routes for movies" do
    it "routes get find movies whith same director" do
      expect(:get => samedirector_path(1)).to route_to(
        :controller => "movies",
        :action => "samedirector",
        :id => "1"
      )
    end
  end
  
  describe "links on pages" do
    let(:mov) { Movie.create(title:"Alien", director: "Ridley Scott", release_date: "12-06-1979")}
    it "looks for links at: movie detail page" do
      get :show, {:id => "#{mov.id}"}
      #debugger 
      expect(response.body).to have_link("Find Movies With Same Director", 
        href: samedirector_path(mov))
      
    end
  end

  describe "GET #samedirector" do
    subject {get :index}
    
    it "renders the samedirector template" do
      expect(subject).to render_template(:samedirector)
    end
  end
end
